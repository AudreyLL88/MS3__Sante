{% extends "base.html" %}
{% block content %}

 <!-- Main container/Page Title -->
<section class="container cocktail-section">
   <div class="cocktail-headline text-center">
      <h2>All Cocktails</h2>
   </div>
   <hr class="mb-2">

  
    <!-- Search box -->
   <div class="row mt-4">
      <form action="{{ url_for('search') }}" method="post" class="col-12 col-lg-4 align-item-center">
         <div class="input-group">
                <input type="search" name="query" class="query form-control" placeholder="Search cocktail">
                <span class="input-group-btn">
                    <button class="btn btn-warning text-white" type="submit"><i class="fa fa-search"></i></button>
                </span>
         </div>
      </form>
   </div>
                              
    <!-- Cocktail card -->
   {% if cocktails|length > 0 %}
    <div class="row">
                    {% for cocktail in cocktails %}
                        <div class="col-md-4">
                            <div class="cocktail-card shadow my-3">
                                <div class="cocktail-body text-center">
                                    <img src="{{ cocktail.cocktail_img }}" alt="" class="cocktail-img rounded">
                                    <h4 class="card-cocktail-title py-2 px-3">{{ cocktail.cocktail_name }}</h4>
                                    <p>{{ cocktail.category_name }}</p>
                                    <small class="card-cocktail-description px-3">"{{ cocktail.cocktail_description }}"</small>
                                    <p>
                                        <i class="fa fa-star" aria-hidden="true"></i>
                                        <i class="fa fa-star" aria-hidden="true"></i>
                                        <i class="fa fa-star" aria-hidden="true"></i>
                                    </p>
                                </div>
                                <div class="text-center mb-3">
                                <a href="{{url_for('get_cocktail', cocktail_id=cocktail._id)}}" class="btn btn-small btn-warning text-white">Try</a>
                                {% if session.user|lower == cocktail.created_by|lower %}
                                    <button class="btn btn-small btn-danger" data-toggle="modal" data-target="#delete_cocktail">Delete</button>
                                    <a  href="{{ url_for('edit_cocktail', cocktail_id=cocktail._id)}}" class="btn  btn-small btn-success">Edit</a>
                                {% endif %}
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>

     
       <!-- No results -->
      {% else %}
         <h2>No result found</h2>
   {% endif %}
  
</section>

<!-- Modal -->
<div class="modal fade" id="delete_cocktail" tabindex="-1" role="dialog" aria-labelledby="delete_cocktail" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered " role="document">
        <div class="modal-content rounded-0">
            <div class="modal-header">
                <h5 class="modal-title">Delete this cocktail?</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                Are you sure you want to delete this cocktail? This will be deleted forever.
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-warning text-white" data-dismiss="modal">Cancel</button>
                {% for cocktail in cocktails%}
                <a href="{{ url_for('delete_cocktail', cocktail_id=cocktail._id)}}" type="button"
                        class="btn btn-danger">Delete</a>
                {% endfor %}
            </div>
        </div>
    </div>
</div>

{% endblock %}